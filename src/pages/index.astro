---
import Layout from '../layouts/Layout.astro';
import InfinitePaperList from '../components/InfinitePaperList';
import SearchBar from '../components/SearchBar';
import { searchPapers } from '../lib/arxiv';
import { DEFAULT_CATEGORY, CATEGORY_MAP } from '../lib/categories';

// Fetch recent papers for default category
const initialQuery = `cat:${DEFAULT_CATEGORY}`;
const { entries, totalResults } = await searchPapers(initialQuery, 0, 9);
const defaultCategoryName = CATEGORY_MAP[DEFAULT_CATEGORY];
---

<Layout title="marXiv - Modern arXiv Interface" isHome={true}>
	<div class="container mx-auto px-4 py-8 space-y-12">
		<section class="flex flex-col items-center justify-center py-16 md:py-24 text-center space-y-6 relative overflow-hidden">
            <div class="absolute inset-0 bg-primary/5 blur-[100px] rounded-full pointer-events-none -z-10"></div>

			<h1 class="text-6xl md:text-9xl font-display font-bold tracking-tighter uppercase text-transparent bg-clip-text bg-gradient-to-b from-foreground to-foreground/50 leading-[0.9]">
				marXiv
			</h1>
			<p class="text-xl md:text-2xl text-muted-foreground font-light max-w-[600px]">
				arXiv, but prettier according to some guy
			</p>
			<div id="hero-search" class="w-full max-w-lg pt-8 relative z-10">
				<SearchBar client:load className="w-full drop-shadow-[0_0_15px_hsl(var(--primary)/0.1)]" />
			</div>
		</section>

		<section>
			<div class="flex items-center justify-between mb-8 border-b border-border pb-4">
				<h2 class="text-2xl font-display font-semibold tracking-wide flex items-center gap-2">
                    <span class="text-primary">//</span> {defaultCategoryName}
                </h2>
				<a href="/categories" class="text-sm font-medium hover:text-primary transition-colors text-muted-foreground">View All Categories &rarr;</a>
			</div>

			<InfinitePaperList
				client:visible
				initialPapers={entries}
				query={initialQuery}
				totalResults={totalResults}
			/>
		</section>
	</div>
</Layout>
